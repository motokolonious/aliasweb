<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="A personal website for alias web." />
    <title>aliasweb</title>
    <link rel="icon" type="image/png" href="aliasweb.png">
    <link rel="stylesheet" type="text/css" href="root.css">
    <link rel="stylesheet" type="text/css" href="header_body_footer_default.css">
    <link rel="stylesheet" type="text/css" href="divisors.css">
    <link rel="stylesheet" type="text/css" href="getaccess.css">
    <style type="text/css">
      article figure {
        margin: 0;
        text-align: center;
      }
    </style>
    <script src="GetAccess.js" type="text/javascript"></script>
    <script type="text/javascript">
      const sessionModalHeaderTxt = "Session Token";
      const sessionParagraphTxt = "This is mostly the same thing as a password. However, depending on how it was generated and distributed it might look long and incoherent. These tokens are deleted after your browsing session ends and the token data source is regularly purged just to be safe. You will not be able to use the same token again afterward.";
      const macHeaderTxt = "Message Authentication Code";
      const macParagraphTxt = "An encrypted and authenticated value which verifies message integrity. The message can be any passphrase or paragraph. Valid input duration periods are negotiated when the code is created.";
      const identityHeaderTxt = "Divine Identity";
      const identityParagraphTxt = "A fully verified identity implemented using digital signatures and more. It is unlikely you have one of these.";
      const accessEndpoint = "https://aliasweb.me/api/get_token";
    </script>
  </head>
  <header>
    <a href="index.htm">
      <img src="aliasweb.png" alt="" />
      <p>Alias Web</p>
    </a>
  </header>
  <body>
    <article id="lockarticle--1999">
      <figure>
        <svg version="1.0" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="400px" height="400px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">
          <g>
            <path fill="#231F20" d="M8,56v4c0,2.211,1.789,4,4,4h40c2.211,0,4-1.789,4-4v-4H8z"/>
            <path fill="#231F20" d="M56,54V34H8v20H56z M32,36c2.762,0,5,2.238,5,5c0,1.631-0.791,3.066-2,3.979V49c0,1.657-1.343,3-3,3
              s-3-1.343-3-3v-4.021c-1.209-0.912-2-2.348-2-3.979C27,38.238,29.238,36,32,36z"/>
            <path fill="#231F20" d="M31,43.816V49c0,0.553,0.447,1,1,1s1-0.447,1-1v-5.184c1.163-0.413,2-1.512,2-2.816c0-1.657-1.343-3-3-3
              s-3,1.343-3,3C29,42.305,29.837,43.403,31,43.816z"/>
            <path fill="#231F20" d="M56,32v-4c0-2.211-1.789-4-4-4h-6V14c0-7.732-6.268-14-14-14S18,6.268,18,14v10h-6c-2.211,0-4,1.789-4,4v4
              H56z M38,24H26V14c0-3.313,2.687-6,6-6s6,2.687,6,6V24z M20,14c0-6.627,5.373-12,12-12s12,5.373,12,12v10h-4V14
              c0-4.418-3.582-8-8-8s-8,3.582-8,8v10h-4V14z"/>
          </g>
        </svg>
        <figcaption>You don't have a business token!</figcaption>
      </figure>
      <div class="med-division"></div>
    </article>
    <input type="button" class="getaccess__button" value="Get Access!" onclick="activateGetAccessContent()"></input>
    <article class="getaccess__article" id="getaccess__article--h63o1jiuhz">
      <header class="getaccess__header"><h3>Get Access!</h3></header>
      <div class="getaccess__content">
        <div>
          <div><label>Single use session token:</label></div><div><input type="button" value="Go" onclick="setDomAccessElement(sessionModalHeaderTxt, sessionParagraphTxt, accessEndpoint)"/></div>
        </div>
        <div>
          <div><label>Message authentication code:</label></div><div><input type="button" value="Go" onclick="setDomAccessElement(macHeaderTxt, macParagraphTxt, accessEndpoint)"/></div>
        </div>
        <div>
          <div><label>Identity and signature:</label></div><div><input type="button" value="Go" onclick="setDomAccessElement(identityHeaderTxt, identityParagraphTxt, accessEndpoint)" /></div>
        </div>
      </div>
    </article>
    <script type="text/javascript">
      (function addDocumentBodyEvents() {
        document.body.addEventListener("keyup", (e) => {
          if (e.key === "Escape") disableGetAccessContent();
        }, true);
      })();
      function setDomAccessElement(headerText, paragraphText, endpoint) {
        const accessObject = accessObjectFn();
        //Previously the article was appended like this:
        //document.body.insertAdjacentElement('beforeend', accessObject.getModalElement(headerText, paragraphText, endpoint));
        //But now we're going to replace the lock svg with the access article
        const lockArticle = document.getElementById("lockarticle--1999");
        if (lockArticle) lockArticle.remove();

        const accessArticles = document.getElementsByClassName(accessObject.articleClassName);
        if (accessArticles && accessArticles.length > 0) accessArticles[0].remove();
        document.body.prepend(accessObject.getAuthArticle(headerText, paragraphText, endpoint));

        const dimdivClassName = "getaccess__dimdiv";
        const dimdivs = document.getElementsByClassName(dimdivClassName);
        if (dimdivs && dimdivs.length > 0) dimdivs[0].remove();

        const modalArticleId = "getaccess__article--h63o1jiuhz";
        const modalArticle = document.getElementById(modalArticleId);
        if (modalArticle) modalArticle.setAttribute("class", "getaccess__article");
      }
      function disableGetAccessContent() {
        const articleId = "getaccess__article--h63o1jiuhz";
        const targetClassName = "getaccess__article";
        const accessArticle = document.getElementById(articleId);
        if (accessArticle === null) throw new Error(`${articleId} not found.`);
        accessArticle.setAttribute("class", targetClassName);

        const dimdivClassName = "getaccess__dimdiv";
        const dimdivs = document.getElementsByClassName(dimdivClassName);
        if (dimdivs && dimdivs.length > 0) dimdivs[0].remove();
      }
      function activateGetAccessContent() {
        const articleId = "getaccess__article--h63o1jiuhz";
        const targetClassName = "getaccess__article--active";
        const accessArticle = document.getElementById(articleId);
        if (accessArticle === null) throw new Error(`${articleId} not found.`);
        accessArticle.setAttribute("class", targetClassName);

        const dimdiv = document.createElement("div");
        dimdiv.addEventListener("click", disableGetAccessContent);
        dimdiv.setAttribute("class", "getaccess__dimdiv");
        document.body.appendChild(dimdiv);
      }
    </script>
  </body>
  <footer>
    <p>&#9888;&#128274;&#9888;</p>
    <br />
    <p>&#169;copyright! jk not really&#169;</p>
  </footer>
</html>
